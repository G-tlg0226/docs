# web构建与优化规划

如果你只是从别人的demo中拉取代码，快速填充业务逻辑，而不重视如何构建、构建优化、web前端优化等，那么即看到此处就够了，接下来的叙述极可能让你吃苍蝇。

在上一集的流程图里我们可以看到，我把一个项目分成了若干个可复用模块，单个模块将独立于任何项目存在，却又能通过一定的配置无缝集成或者服务于指定项目。

## 第一 优化业务 业务模块化

- 主旨在于优化用户体验，减少开发工作量
- 尽可能明确代码细节、代码实现逻辑，减少代码体积
- 工具函数外置文件化,  创建web-utils 模块，对于自己编写的 utils 功能函数，需要写出相应的测试用例与说明文档，具体的可参考loadsh等，对于使用此类的第三方库，应该避免冗余
- 复用功能组件化， 具体的名称规则与功能相关
- 对于业务块的开发的说明文档是必需的，对其中的关键点给出相应的注释

## 第二 明确站点资源 对点优化

- 原则上是为了减少资源体积，增强资源复用与缓存
- PageSpeed Insights 能够针对单一网页在‘用户体验’方面给出相应的优化建议
- Webpagetest 能够正对单一网页资源加载耗时提供可视化意见，通过它可以相对性的得出每个资源的耗时情况，从而定向处理耗时
- Coverage profiler 覆盖分析器， 通过它可以发现未使用的 css 与 js 代码，页面或代码加载后，此面板会展示出使用与未使用的代码情况，据此可能精确剪掉未使用的代码，减少页面的体积
- Lighthouse 对页面的性能、最佳实践、可访问性以及渐进式Web应用进行审核
- Network 网络限速模拟，针对自己的站点通过chrome Network condittions 通过对网络速度的设置，测试自己的网页在不能的网络环境下的响应

## 第三 资源性能分析

- 原则上为了提供代码的执行速度、加载流畅性
- Performance monitor
- Javascript Profile 分析js函数的性能

## 第四 开发规范

> 详见另一份文档

## 第五 站点优化策略

> 由于项目在线，优化工作应该逐步进行

### 第一阶段

- 项目模型标准化
- 开发流程化规定

### 第二阶段

- 资源gzip化，所有资源通过webpack打包生成gzip包，静态web服务直接发送gzip包
- 类库、第三方模块等定制化

### 第三阶段

- 继承规则开发